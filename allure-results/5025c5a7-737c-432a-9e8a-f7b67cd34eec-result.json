{"uuid":"5025c5a7-737c-432a-9e8a-f7b67cd34eec","historyId":"620b3f5b84749cae4ac05a8a4ccbb7f5","fullName":"features/authentication/otp.feature:21","labels":[{"name":"tag","value":"implemented"},{"name":"tag","value":"segment_1"},{"name":"tag","value":"j1.11"},{"name":"tag","value":"otp"},{"name":"severity","value":"critical"},{"name":"tag","value":"e2e"},{"name":"tag","value":"bu-identity"},{"name":"tag","value":"otp_request"},{"name":"host","value":"MacBook-Pro-de-Glaucio.local"},{"name":"thread","value":"8287@MacBook-Pro-de-Glaucio.local.main(1)"},{"name":"feature","value":"Geração e Validação de OTP"},{"name":"story","value":"Solicitação de OTP via WHATSAPP para REGISTRATION bem-sucedida"},{"name":"suite","value":"Geração e Validação de OTP"},{"name":"testClass","value":"Solicitação de OTP via WHATSAPP para REGISTRATION bem-sucedida"},{"name":"framework","value":"cucumber4jvm"},{"name":"language","value":"java"},{"name":"gherkin_uri","value":"classpath:features/authentication/otp.feature"},{"name":"package","value":"features.authentication.otp_feature.Geração e Validação de OTP"}],"links":[],"name":"Solicitação de OTP via WHATSAPP para REGISTRATION bem-sucedida","status":"failed","statusDetails":{"known":false,"muted":false,"flaky":false,"message":"[Solicitação de OTP deve retornar status 200. Resposta: {\"errorCode\":\"AU-A-VAL006\",\"message\":\"Required field 'User phone is not available' is missing\",\"cause\":\"Required field 'User phone is not available' is missing from request\",\"action\":\"Please include the 'User phone is not available' field in your request\",\"timestamp\":\"2025-11-18T12:11:27.648066801Z\",\"httpStatus\":400,\"severity\":\"MEDIUM\",\"retryable\":false,\"retryPolicy\":null,\"context\":{\"correlationId\":null,\"traceId\":null,\"spanId\":null,\"timestamp\":\"2025-11-18T12:11:27.646491099Z\",\"userId\":null,\"operation\":null,\"additionalContext\":{}},\"metadata\":{}}] \nexpected: 200\n but was: 400","trace":"org.opentest4j.AssertionFailedError: [Solicitação de OTP deve retornar status 200. Resposta: {\"errorCode\":\"AU-A-VAL006\",\"message\":\"Required field 'User phone is not available' is missing\",\"cause\":\"Required field 'User phone is not available' is missing from request\",\"action\":\"Please include the 'User phone is not available' field in your request\",\"timestamp\":\"2025-11-18T12:11:27.648066801Z\",\"httpStatus\":400,\"severity\":\"MEDIUM\",\"retryable\":false,\"retryPolicy\":null,\"context\":{\"correlationId\":null,\"traceId\":null,\"spanId\":null,\"timestamp\":\"2025-11-18T12:11:27.646491099Z\",\"userId\":null,\"operation\":null,\"additionalContext\":{}},\"metadata\":{}}] \nexpected: 200\n but was: 400\n\tat com.nulote.journey.stepdefinitions.AuthenticationSteps.a_solicitacao_de_otp_deve_retornar_status(AuthenticationSteps.java:1571)\n\tat ✽.a solicitação de OTP deve retornar status 200(classpath:features/authentication/otp.feature:24)\n"},"stage":"finished","description":"  Como um usuário\n  Eu quero solicitar e validar códigos OTP\n  Para realizar operações que requerem verificação","steps":[{"name":"Given  a infraestrutura de testes está configurada","status":"passed","statusDetails":{"known":false,"muted":false,"flaky":false},"stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1763467870344,"stop":1763467870345},{"name":"And  os microserviços estão rodando","status":"passed","statusDetails":{"known":false,"muted":false,"flaky":false},"stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1763467870345,"stop":1763467870346},{"name":"And  que tenho dados de teste únicos","status":"passed","statusDetails":{"known":false,"muted":false,"flaky":false},"stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1763467870346,"stop":1763467870347},{"name":"And  que crio um usuário com esses dados","status":"passed","statusDetails":{"known":false,"muted":false,"flaky":false},"stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1763467870347,"stop":1763467871961},{"name":"Given  que o usuário criado tem telefone configurado","status":"passed","statusDetails":{"known":false,"muted":false,"flaky":false},"stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1763467871961,"stop":1763467887633},{"name":"When  eu solicito OTP via \"WHATSAPP\" para \"REGISTRATION\"","status":"passed","statusDetails":{"known":false,"muted":false,"flaky":false},"stage":"finished","steps":[],"attachments":[{"name":"Status Code","source":"6dfc1c70-e0b6-42e8-a333-d142f505e0a6-attachment.txt","type":"text/plain"},{"name":"Request Info","source":"74fa4ef0-88f2-4f3a-9eda-00f38e35044a-attachment.txt","type":"text/plain"},{"name":"Response Headers","source":"9699bb53-4bd0-477b-b1c4-7426b00cad24-attachment.txt","type":"text/plain"}],"parameters":[],"start":1763467887634,"stop":1763467887653},{"name":"Then  a solicitação de OTP deve retornar status 200","status":"failed","statusDetails":{"known":false,"muted":false,"flaky":false,"message":"[Solicitação de OTP deve retornar status 200. Resposta: {\"errorCode\":\"AU-A-VAL006\",\"message\":\"Required field 'User phone is not available' is missing\",\"cause\":\"Required field 'User phone is not available' is missing from request\",\"action\":\"Please include the 'User phone is not available' field in your request\",\"timestamp\":\"2025-11-18T12:11:27.648066801Z\",\"httpStatus\":400,\"severity\":\"MEDIUM\",\"retryable\":false,\"retryPolicy\":null,\"context\":{\"correlationId\":null,\"traceId\":null,\"spanId\":null,\"timestamp\":\"2025-11-18T12:11:27.646491099Z\",\"userId\":null,\"operation\":null,\"additionalContext\":{}},\"metadata\":{}}] \nexpected: 200\n but was: 400","trace":"org.opentest4j.AssertionFailedError: [Solicitação de OTP deve retornar status 200. Resposta: {\"errorCode\":\"AU-A-VAL006\",\"message\":\"Required field 'User phone is not available' is missing\",\"cause\":\"Required field 'User phone is not available' is missing from request\",\"action\":\"Please include the 'User phone is not available' field in your request\",\"timestamp\":\"2025-11-18T12:11:27.648066801Z\",\"httpStatus\":400,\"severity\":\"MEDIUM\",\"retryable\":false,\"retryPolicy\":null,\"context\":{\"correlationId\":null,\"traceId\":null,\"spanId\":null,\"timestamp\":\"2025-11-18T12:11:27.646491099Z\",\"userId\":null,\"operation\":null,\"additionalContext\":{}},\"metadata\":{}}] \nexpected: 200\n but was: 400\n\tat com.nulote.journey.stepdefinitions.AuthenticationSteps.a_solicitacao_de_otp_deve_retornar_status(AuthenticationSteps.java:1571)\n\tat ✽.a solicitação de OTP deve retornar status 200(classpath:features/authentication/otp.feature:24)\n"},"stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1763467887653,"stop":1763467887672},{"name":"And  o evento \"otp.sent\" deve ser publicado","status":"skipped","statusDetails":{"known":false,"muted":false,"flaky":false},"stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1763467887673,"stop":1763467887673},{"name":"And  o código OTP deve estar presente na resposta","status":"skipped","statusDetails":{"known":false,"muted":false,"flaky":false},"stage":"finished","steps":[],"attachments":[],"parameters":[],"start":1763467887673,"stop":1763467887673}],"attachments":[],"parameters":[],"start":1763467870343,"stop":1763467887674}