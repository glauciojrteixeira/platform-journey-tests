spring:
  application:
    name: platform-journey-tests

# Configuração padrão E2E
e2e:
  environment: local
  timeout: 30000
  # Timeouts para eventos assíncronos (mensageria)
  # Considerando cluster local com latência mínima:
  # - Outbox Pattern: até 2s de delay
  # - Processamento: ~100ms
  # - Polling overhead: reduzido para 500ms (menos verbosidade)
  # - Margem de segurança: 200ms
  # Total mínimo seguro: ~3 segundos
  event-timeout-seconds: 3
  event-poll-interval-ms: 500  # Aumentado de 200ms para 500ms para reduzir verbosidade dos logs
  # Simulação de providers: permite simular envio de mensagens aos providers
  # em ambientes não-PROD, evitando custos e permitindo testes sem dependências externas
  simulate-provider:
    enabled: true  # Default: true para local/sit/uat, false para prod
  # Configuração de retry para rate limiting
  rate-limit-retry:
    max-attempts: 3  # Número máximo de tentativas quando receber 429
    initial-delay-ms: 2000  # Delay inicial em milissegundos (backoff exponencial: 2s, 4s, 8s)
    enabled: true  # Habilitar retry automático para rate limiting
  services:
    identity-url: http://localhost:8084
    auth-url: http://localhost:8080
    profile-url: http://localhost:8088

# Configuração RabbitMQ para testes E2E
rabbitmq:
  host: localhost
  port: 5672
  username: guest
  password: guest

